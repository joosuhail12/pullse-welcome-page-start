
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  .chat-message-bubble {
    @apply p-4 mb-3 rounded-lg shadow-sm max-w-xs md:max-w-md transition-all duration-200;
  }
  
  .chat-message-system {
    @apply text-system-bubble-foreground rounded-bl-none chat-message-bubble;
    background: linear-gradient(145deg, #f0eaff 0%, #e5deff 100%);
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.1);
  }
  
  .chat-message-user {
    @apply text-white rounded-br-none chat-message-bubble;
    background: linear-gradient(145deg, #9672f7 0%, #8b5cf6 100%);
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
  }

  /* Hover effect for actionable messages (with quick replies or buttons) */
  .chat-message-actionable:hover {
    @apply transform scale-[1.01] shadow-md;
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.15);
  }
  
  /* Enhanced animation for message appearance */
  @keyframes message-appear {
    0% {
      opacity: 0;
      transform: translateY(10px) scale(0.98);
    }
    70% {
      opacity: 1;
      transform: translateY(-2px) scale(1.01);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
  
  .message-animation-enter {
    animation: message-appear 0.4s ease-out forwards;
  }
  
  /* Date separator for message groups */
  .date-separator {
    @apply w-full flex items-center justify-center my-4;
  }
  
  .date-separator .date {
    @apply text-xs bg-gray-100 px-3 py-1 rounded-full text-gray-500 font-medium shadow-sm;
  }
  
  /* Typing indicator animation */
  @keyframes typing-bounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-5px);
    }
  }
  
  .animate-typing-bounce {
    animation: typing-bounce 0.8s ease-in-out infinite;
  }
  
  /* Improved focus states for keyboard navigation */
  :focus-visible {
    @apply outline-2 outline-offset-2 outline-vivid-purple;
    outline-style: solid;
  }
  
  /* Higher contrast colors for better accessibility */
  .text-gray-500 {
    @apply text-gray-600;  /* Darker gray for better contrast */
  }
  
  .text-gray-400 {
    @apply text-gray-600;  /* Darker gray for better contrast */
  }
  
  /* Accessible button focus styles */
  button:focus-visible {
    @apply ring-2 ring-offset-2 ring-vivid-purple;
  }

  /* NEW ANIMATIONS AND MICRO-INTERACTIONS */
  
  /* Message status animations */
  @keyframes status-change {
    0% { transform: scale(0.8); opacity: 0; }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); opacity: 1; }
  }
  
  .status-icon-animation {
    animation: status-change 0.3s ease-out forwards;
  }
  
  /* Message sending animation */
  @keyframes message-sending {
    0% { opacity: 0.7; }
    50% { opacity: 0.5; }
    100% { opacity: 0.7; }
  }
  
  .message-sending {
    animation: message-sending 1.2s infinite;
  }
  
  /* File upload micro-interactions */
  @keyframes file-upload-success {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); background-color: rgba(139, 92, 246, 0.15); }
    100% { transform: scale(1); }
  }
  
  .file-upload-success {
    animation: file-upload-success 0.5s ease-out;
  }
  
  /* Reaction micro-interactions */
  @keyframes reaction-selected {
    0% { transform: scale(1); }
    40% { transform: scale(1.3); }
    70% { transform: scale(0.9); }
    100% { transform: scale(1); }
  }
  
  .reaction-selected {
    animation: reaction-selected 0.4s ease-out;
  }
  
  /* Message delivery confirmation */
  @keyframes delivery-confirmation {
    0% { opacity: 0; transform: translateY(4px); }
    100% { opacity: 1; transform: translateY(0); }
  }
  
  .delivery-animation {
    animation: delivery-confirmation 0.3s ease-out;
  }

  /* Loading state pulse effect */
  @keyframes loading-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
  }
  
  .loading-pulse {
    animation: loading-pulse 1.5s infinite ease-in-out;
  }
}

/* Enhanced keyboard navigation indicators for chat components */
.chat-widget-container:focus-within {
  @apply ring-1 ring-vivid-purple/30;
}

/* Keyboard accessible elements */
[tabindex]:not([tabindex="-1"]):focus-visible {
  @apply ring-2 ring-vivid-purple ring-offset-2;
}
